### Solar Power generated by Steca power (REST) ##################################################
  - platform: rest
    resource: http://192.168.xxx.xx/measurements.xml
    json_attributes:
      - root
      - Measurements
    name: solar_inverter
    scan_interval: 10
    value_template: 'OK'

#Template
  - platform: template
    sensors:
      solar_live_output:
        value_template: >
            {% set root = state_attr('sensor.solar_inverter', 'root') %}
            {% if root.Device.Measurements.Measurement[2]["@Value"] is defined %}
                {{ root.Device.Measurements.Measurement[2]["@Value"] | round(0)}}
            {% else %}
                0
            {% endif %}
        device_class: power
        unit_of_measurement: 'Watt'
        friendly_name: Live power
        
        
      solar_live_temp:
        value_template: >
            {% set root = state_attr('sensor.solar_inverter', 'root') %}
            {% if root.Device.Measurements.Measurement[6]["@Value"] is defined %}
                {{ root.Device.Measurements.Measurement[6]["@Value"] }}
            {% else %}
                0
            {% endif %}
        device_class: temperature
        unit_of_measurement: 'Â°C'
        friendly_name: Inverter temperature


  - platform: template
    sensors: 
      solar_level:
        # icon: MDI:solar-power
        value_template: >
          {% if float(states ("sensor.solar_live_output")) >  3000 %}
            VIERD_HIGH
          {% elif float(states ("sensor.solar_live_output")) > 900 %}
            very_high
          {% elif float(states ("sensor.solar_live_output")) > 700 %}
            high
          {% elif float(states ("sensor.solar_live_output")) > 500 %}
            medium
          {% elif float(states ("sensor.solar_live_output")) > 300 %}
            low
          {% elif float(states ("sensor.solar_live_output")) > 200 %}
            very_low
          {% elif float(states ("sensor.solar_live_output")) <   1 %}
            zero
          {% else %}
            VIERD_LOW
          {% endif %}
        entity_id: sensor.solar_live_output
